<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WeatherSphere</title>

  <!-- SVG Favicon ‚Äî orbital sphere with sun + cloud -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3CradialGradient id='a' cx='38%25' cy='30%25' r='65%25'%3E%3Cstop offset='0%25' stop-color='%2367e8f9'/%3E%3Cstop offset='55%25' stop-color='%230ea5e9'/%3E%3Cstop offset='100%25' stop-color='%230c4a6e'/%3E%3C/radialGradient%3E%3CradialGradient id='b' cx='40%25' cy='35%25' r='60%25'%3E%3Cstop offset='0%25' stop-color='%23fef08a'/%3E%3Cstop offset='100%25' stop-color='%23f59e0b'/%3E%3C/radialGradient%3E%3CclipPath id='c'%3E%3Ccircle cx='32' cy='32' r='29'/%3E%3C/clipPath%3E%3C/defs%3E%3Ccircle cx='32' cy='32' r='30' fill='url(%23a)'/%3E%3Cellipse cx='32' cy='32' rx='29' ry='10' fill='none' stroke='rgba(255,255,255,0.15)' stroke-width='1' clip-path='url(%23c)'/%3E%3Cellipse cx='32' cy='32' rx='10' ry='29' fill='none' stroke='rgba(255,255,255,0.1)' stroke-width='1' clip-path='url(%23c)'/%3E%3Ccircle cx='32' cy='17' r='7' fill='url(%23b)' opacity='0.95'/%3E%3Cg clip-path='url(%23c)'%3E%3Cpath d='M12 42 Q10 33 18 29 Q18 18 28 18 Q36 13 44 21 Q50 21 50 28 Q54 28 54 34 Q54 42 47 42 Z' fill='white' opacity='0.93'/%3E%3C/g%3E%3Ccircle cx='32' cy='32' r='29.5' fill='none' stroke='rgba(255,255,255,0.2)' stroke-width='1'/%3E%3C/svg%3E">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Unbounded:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="css/Main.css">
</head>
<body>
  <!-- SPLASH -->
  <div id="splash" class="splash">
    <div class="splash-orb so1"></div><div class="splash-orb so2"></div><div class="splash-orb so3"></div>
    <canvas id="splashCanvas"></canvas>
    <div class="splash-content">
      <div class="splash-logo-wrap">
        <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <radialGradient id="sp-g" cx="38%" cy="30%" r="65%">
              <stop offset="0%" stop-color="#a5f3fc"/>
              <stop offset="40%" stop-color="#22d3ee"/>
              <stop offset="75%" stop-color="#0284c7"/>
              <stop offset="100%" stop-color="#0c4a6e"/>
            </radialGradient>
            <radialGradient id="sp-s" cx="40%" cy="35%" r="60%">
              <stop offset="0%" stop-color="#fef9c3"/>
              <stop offset="60%" stop-color="#fbbf24"/>
              <stop offset="100%" stop-color="#d97706"/>
            </radialGradient>
            <radialGradient id="sp-r" cx="30%" cy="25%" r="75%">
              <stop offset="0%" stop-color="rgba(255,255,255,0.35)"/>
              <stop offset="100%" stop-color="rgba(255,255,255,0)"/>
            </radialGradient>
            <filter id="sp-gf"><feGaussianBlur stdDeviation="1.5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
            <clipPath id="sp-c"><circle cx="40" cy="40" r="36"/></clipPath>
          </defs>
          <circle cx="40" cy="40" r="36" fill="url(#sp-g)"/>
          <ellipse cx="40" cy="40" rx="36" ry="11" fill="none" stroke="rgba(255,255,255,0.13)" stroke-width="1" clip-path="url(#sp-c)"/>
          <ellipse cx="40" cy="40" rx="36" ry="22" fill="none" stroke="rgba(255,255,255,0.07)" stroke-width="1" clip-path="url(#sp-c)"/>
          <ellipse cx="40" cy="40" rx="12" ry="36" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1" clip-path="url(#sp-c)"/>
          <circle cx="40" cy="40" r="36" fill="url(#sp-r)"/>
          <g filter="url(#sp-gf)"><circle cx="40" cy="21" r="8.5" fill="url(#sp-s)"/></g>
          <g stroke="#fcd34d" stroke-width="1.5" stroke-linecap="round" opacity="0.85">
            <line x1="40" y1="9" x2="40" y2="6.5"/>
            <line x1="50" y1="12" x2="52" y2="10"/>
            <line x1="54" y1="21" x2="57" y2="21"/>
            <line x1="50" y1="30" x2="52" y2="32"/>
            <line x1="30" y1="12" x2="28" y2="10"/>
            <line x1="26" y1="21" x2="23" y2="21"/>
          </g>
          <g clip-path="url(#sp-c)">
            <path d="M16 55 Q14 45 22 40 Q22 29 33 29 Q42 23 51 32 Q57 32 57 39 Q62 39 62 46 Q62 55 54 55 Z" fill="white" opacity="0.95"/>
            <path d="M20 42 Q22 38 28 37" stroke="rgba(255,255,255,0.5)" stroke-width="1.5" stroke-linecap="round" fill="none"/>
          </g>
          <circle cx="40" cy="40" r="35.5" fill="none" stroke="rgba(255,255,255,0.22)" stroke-width="1"/>
          <path d="M15 28 Q18 17 30 14" stroke="rgba(255,255,255,0.45)" stroke-width="1.8" stroke-linecap="round" fill="none"/>
        </svg>
      </div>
      <h1 class="splash-title">WeatherSphere</h1>
      <p class="splash-tagline">Live ¬∑ Accurate ¬∑ Beautiful</p>
      <p class="splash-desc">Real-time weather, AI-powered climate insights,<br>and hyper-local forecasts ‚Äî all in one place.</p>
      <div class="splash-features">
        <div class="splash-feat"><span>üåç</span><span>Global Coverage</span></div>
        <div class="splash-feat"><span>‚ö°</span><span>Live Updates</span></div>
        <div class="splash-feat"><span>üó∫</span><span>Interactive Map</span></div>
        <div class="splash-feat"><span>üìú</span><span>AI Climate Data</span></div>
      </div>
      <div class="splash-scroll-hint">
        <div class="scroll-chevron"></div>
        <span>Scroll to explore</span>
      </div>
    </div>
  </div>

  <!-- DAY DETAIL MODAL -->
  <div id="dayModal" class="day-modal hidden" role="dialog">
    <div class="day-modal-backdrop" id="dayModalBackdrop"></div>
    <div class="day-modal-panel">
      <button class="day-modal-close" id="dayModalClose">‚úï</button>
      <div id="dayModalContent"></div>
    </div>
  </div>

  <!-- Background -->
  <div class="orb orb-1"></div><div class="orb orb-2"></div><div class="orb orb-3"></div>
  <canvas id="bgCanvas"></canvas>

  <!-- Toast -->
  <div id="errorToast" class="toast hidden">
    <span>‚ö†</span><span id="errorMsg">Error</span>
    <button onclick="this.closest('.toast').classList.add('hidden')">‚úï</button>
  </div>

  <!-- Tracking banner -->
  <div id="trackBanner" class="track-banner hidden">
    <span class="live-dot"></span><span id="trackText">Live tracking</span>
    <button id="stopTrack">Stop</button>
  </div>

  <!-- HEADER -->
  <header class="header reveal-item" data-delay="0">
    <div class="header-brand">
      <div class="logo">
        <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <radialGradient id="h-g" cx="38%" cy="30%" r="65%">
              <stop offset="0%" stop-color="#a5f3fc"/>
              <stop offset="40%" stop-color="#22d3ee"/>
              <stop offset="75%" stop-color="#0284c7"/>
              <stop offset="100%" stop-color="#0c4a6e"/>
            </radialGradient>
            <radialGradient id="h-s" cx="40%" cy="35%" r="60%">
              <stop offset="0%" stop-color="#fef9c3"/>
              <stop offset="60%" stop-color="#fbbf24"/>
              <stop offset="100%" stop-color="#d97706"/>
            </radialGradient>
            <radialGradient id="h-r" cx="30%" cy="25%" r="75%">
              <stop offset="0%" stop-color="rgba(255,255,255,0.35)"/>
              <stop offset="100%" stop-color="rgba(255,255,255,0)"/>
            </radialGradient>
            <clipPath id="h-c"><circle cx="40" cy="40" r="36"/></clipPath>
          </defs>
          <circle cx="40" cy="40" r="36" fill="url(#h-g)"/>
          <ellipse cx="40" cy="40" rx="36" ry="11" fill="none" stroke="rgba(255,255,255,0.13)" stroke-width="1" clip-path="url(#h-c)"/>
          <ellipse cx="40" cy="40" rx="12" ry="36" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1" clip-path="url(#h-c)"/>
          <circle cx="40" cy="40" r="36" fill="url(#h-r)"/>
          <circle cx="40" cy="21" r="8.5" fill="url(#h-s)"/>
          <g stroke="#fcd34d" stroke-width="1.5" stroke-linecap="round" opacity="0.8">
            <line x1="40" y1="9" x2="40" y2="6.5"/>
            <line x1="50" y1="12" x2="52" y2="10"/>
            <line x1="54" y1="21" x2="57" y2="21"/>
            <line x1="30" y1="12" x2="28" y2="10"/>
            <line x1="26" y1="21" x2="23" y2="21"/>
          </g>
          <g clip-path="url(#h-c)">
            <path d="M16 55 Q14 45 22 40 Q22 29 33 29 Q42 23 51 32 Q57 32 57 39 Q62 39 62 46 Q62 55 54 55 Z" fill="white" opacity="0.95"/>
          </g>
          <circle cx="40" cy="40" r="35.5" fill="none" stroke="rgba(255,255,255,0.22)" stroke-width="1"/>
          <path d="M15 28 Q18 17 30 14" stroke="rgba(255,255,255,0.45)" stroke-width="1.8" stroke-linecap="round" fill="none"/>
        </svg>
      </div>
      <div>
        <div class="brand-name">WeatherSphere</div>
        <div class="brand-sub">Live ¬∑ Accurate</div>
      </div>
    </div>
    <div class="header-search">
      <div class="search-box">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input type="text" id="searchInput" placeholder="Search city‚Ä¶" autocomplete="off" spellcheck="false">
        <div id="suggestions" class="suggestions hidden"></div>
      </div>
      <button id="searchBtn" class="btn-search">Search</button>
    </div>
    <div class="header-controls">
      <div id="recentChips" class="chips-row"></div>
      <button id="unitToggle" class="ctrl-btn">¬∞C</button>
      <button id="themeToggle" class="ctrl-btn">
        <svg id="themeIcon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
      <button id="trackBtn" class="ctrl-btn ctrl-track" title="Live tracking">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"/><circle cx="12" cy="10" r="3"/></svg>
      </button>
    </div>
  </header>

  <!-- MAIN -->
  <main class="main" id="appMain">
    <div class="col-left">
      <div id="favSection" class="fav-bar hidden reveal-item" data-delay="1">
        <span class="fav-label">‚≠ê Saved</span>
        <div id="favChips" class="chips-row"></div>
      </div>
      <div class="card hero-card reveal-item" id="heroCard" data-delay="2">
        <div class="hero-bg-orb"></div>
        <div class="hero-top">
          <div><h1 id="locationName" class="hero-city">Loading‚Ä¶</h1><div id="updatedAt" class="hero-updated">‚Äî</div></div>
          <button id="favBtn" class="fav-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
          </button>
        </div>
        <div class="hero-body">
          <div class="hero-icon-wrap"><img id="currentIcon" class="hero-icon" src="" alt=""><div id="iconGlow" class="hero-icon-glow"></div></div>
          <div class="hero-temp-block">
            <div id="currentTemp" class="hero-temp">--¬∞</div>
            <div id="currentCondition" class="hero-cond">--</div>
            <div id="hiLo" class="hero-hilo">H: --¬∞ ¬∑ L: --¬∞</div>
          </div>
        </div>
        <div class="stats-row">
          <div class="stat">
            <div class="stat-icon-wrap"><span class="stat-icon-svg">üå°Ô∏è</span></div>
            <div class="stat-lbl">Feels like</div>
            <div id="feelsLike" class="stat-val">--¬∞</div>
          </div>
          <div class="stat">
            <div class="stat-icon-wrap"><span class="stat-icon-svg">üíß</span></div>
            <div class="stat-lbl">Humidity</div>
            <div id="humidity" class="stat-val">--%</div>
          </div>
          <div class="stat">
            <div class="stat-icon-wrap"><span class="stat-icon-svg">üí®</span></div>
            <div class="stat-lbl">Wind</div>
            <div id="windSpeed" class="stat-val">--</div>
          </div>
          <div class="stat">
            <div class="stat-icon-wrap"><span class="stat-icon-svg">üß≠</span></div>
            <div class="stat-lbl">Direction</div>
            <div id="windDir" class="stat-val">--</div>
          </div>
          <div class="stat">
            <div class="stat-icon-wrap"><span class="stat-icon-svg">üìä</span></div>
            <div class="stat-lbl">Pressure</div>
            <div id="pressure" class="stat-val">--</div>
          </div>
          <div class="stat">
            <div class="stat-icon-wrap"><span class="stat-icon-svg">üëÅÔ∏è</span></div>
            <div class="stat-lbl">Visibility</div>
            <div id="visibility" class="stat-val">--</div>
          </div>
          <div class="stat">
            <div class="stat-icon-wrap"><span class="stat-icon-svg">üåÖ</span></div>
            <div class="stat-lbl">Sunrise</div>
            <div id="sunrise" class="stat-val">--</div>
          </div>
          <div class="stat">
            <div class="stat-icon-wrap"><span class="stat-icon-svg">üåá</span></div>
            <div class="stat-lbl">Sunset</div>
            <div id="sunset" class="stat-val">--</div>
          </div>
        </div>
      </div>
      <div class="row-2col reveal-item" data-delay="3">
        <div class="card uv-card">
          <div class="card-tag">‚òÄÔ∏è UV INDEX</div>
          <div class="card-num-row"><div id="uvValue" class="card-num">--</div><div id="uvLabel" class="card-badge">--</div></div>
          <div class="uv-bar-wrap">
            <div class="uv-bar-track"><div id="uvFill" class="uv-bar-fill"></div><div id="uvDot" class="uv-bar-dot"></div></div>
            <div class="uv-scale"><span>Low</span><span>Mod</span><span>High</span><span>V.Hi</span><span>Ext</span></div>
          </div>
        </div>
        <div class="card aqi-card">
          <div class="card-tag">üå¨ AIR QUALITY</div>
          <div class="card-num-row"><div id="aqiValue" class="card-num">--</div><div id="aqiLabel" class="card-badge">--</div></div>
          <div class="aqi-row">
            <div class="aqi-pill"><span class="aqi-pill-name">PM2.5</span><span id="pm25" class="aqi-pill-val">--</span></div>
            <div class="aqi-pill"><span class="aqi-pill-name">PM10</span><span id="pm10" class="aqi-pill-val">--</span></div>
          </div>
        </div>
      </div>
      <div class="card reveal-item" data-delay="4">
        <div class="card-hd">üïê NEXT 24 HOURS</div>
        <div id="hourlyStrip" class="hourly-strip"></div>
      </div>
      <div class="card reveal-item" data-delay="5">
        <div class="card-hd-row">
          <span class="card-hd">üìÖ 7-DAY FORECAST</span>
          <span class="forecast-hint">Tap a day for details</span>
        </div>
        <div id="dailyList" class="daily-list"></div>
      </div>
      <div class="card climate-card reveal-item" data-delay="6">
        <div class="card-hd">üìú HISTORY AND FACTS</div>
        <div id="climateLoading" class="skeletons">
          <div class="skel w60"></div><div class="skel w90"></div><div class="skel w70"></div>
          <div class="skel w60" style="margin-top:12px"></div><div class="skel w90"></div><div class="skel w50"></div>
        </div>
        <div id="climateStats" class="climate-stat-grid hidden"></div>
        <div id="climateSections" class="climate-sections hidden"></div>
        <div id="climateError" class="climate-err hidden">
          <div class="err-icon">‚ö†Ô∏è</div>
          <p id="climateErrorMsg">Could not load climate data.</p>
          <button id="climateRetry" class="retry-btn">Retry</button>
        </div>
      </div>
    </div>

    <aside class="col-right">
      <div class="card map-card reveal-item" data-delay="2">
        <div class="map-header">
          <span class="card-hd">üó∫ LIVE MAP</span>
          <span class="map-hint">Click anywhere for weather</span>
        </div>
        <div class="map-border-wrap">
          <div id="map"></div>
        </div>
        <div id="mapLoader" class="map-loader hidden"><div class="map-spin"></div><span>Fetching‚Ä¶</span></div>
      </div>
      <div class="card insights-card reveal-item" data-delay="3">
        <div class="insights-header">
          <span class="card-hd">‚ö° INSIGHTS</span>
          
        </div>
        <div id="insightsList" class="insights-list">
          <div class="skel-insight"></div><div class="skel-insight"></div><div class="skel-insight"></div>
        </div>
      </div>
      <div class="card reveal-item" data-delay="4">
        <div class="card-hd">üå° WEEKLY RANGE</div>
        <div id="rangeList" class="range-list"></div>
      </div>
    </aside>
  </main>

  <!-- FOOTER -->
  <footer class="footer reveal-item" data-delay="7">
    <div class="footer-left">
      <div class="footer-brand">
        <div class="footer-logo">
          <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <radialGradient id="f-g" cx="38%" cy="30%" r="65%">
                <stop offset="0%" stop-color="#a5f3fc"/>
                <stop offset="40%" stop-color="#22d3ee"/>
                <stop offset="75%" stop-color="#0284c7"/>
                <stop offset="100%" stop-color="#0c4a6e"/>
              </radialGradient>
              <radialGradient id="f-s" cx="40%" cy="35%" r="60%">
                <stop offset="0%" stop-color="#fef9c3"/>
                <stop offset="60%" stop-color="#fbbf24"/>
                <stop offset="100%" stop-color="#d97706"/>
              </radialGradient>
              <radialGradient id="f-r" cx="30%" cy="25%" r="75%">
                <stop offset="0%" stop-color="rgba(255,255,255,0.35)"/>
                <stop offset="100%" stop-color="rgba(255,255,255,0)"/>
              </radialGradient>
              <clipPath id="f-c"><circle cx="40" cy="40" r="36"/></clipPath>
            </defs>
            <circle cx="40" cy="40" r="36" fill="url(#f-g)"/>
            <ellipse cx="40" cy="40" rx="36" ry="11" fill="none" stroke="rgba(255,255,255,0.13)" stroke-width="1" clip-path="url(#f-c)"/>
            <ellipse cx="40" cy="40" rx="12" ry="36" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1" clip-path="url(#f-c)"/>
            <circle cx="40" cy="40" r="36" fill="url(#f-r)"/>
            <circle cx="40" cy="21" r="8.5" fill="url(#f-s)"/>
            <g clip-path="url(#f-c)">
              <path d="M16 55 Q14 45 22 40 Q22 29 33 29 Q42 23 51 32 Q57 32 57 39 Q62 39 62 46 Q62 55 54 55 Z" fill="white" opacity="0.95"/>
            </g>
            <circle cx="40" cy="40" r="35.5" fill="none" stroke="rgba(255,255,255,0.22)" stroke-width="1"/>
          </svg>
        </div>
        <div>
          <div class="footer-name">WeatherSphere</div>
        </div>
      </div>
    </div>

    <div class="footer-right">
      <span id="clock" class="footer-clock"></span>
    </div>
  </footer>

  <div id="loading" class="loading-veil hidden">
    <div class="spinner"><div></div><div></div><div></div></div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/map.js"></script>
  <script src="js/weather.js"></script>
  <script src="js/climate.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>