<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WeatherSphere</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Unbounded:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <!-- SPLASH -->
  <div id="splash" class="splash">
    <div class="splash-orb so1"></div><div class="splash-orb so2"></div><div class="splash-orb so3"></div>
    <canvas id="splashCanvas"></canvas>
    <div class="splash-content">
      <div class="splash-logo-wrap">
        <svg viewBox="0 0 64 64" fill="none">
          <circle cx="32" cy="32" r="28" fill="url(#slg1)"/>
          <path d="M18 38 Q16 30 22 26 Q22 16 32 16 Q40 10 48 18 Q54 18 54 26 Q58 26 58 32 Q58 38 52 38 Z" fill="white" opacity="0.9"/>
          <circle cx="32" cy="24" r="7" fill="url(#slg2)" opacity="0.85"/>
          <defs>
            <linearGradient id="slg1" x1="0" y1="0" x2="64" y2="64"><stop offset="0%" stop-color="#4FACFE"/><stop offset="100%" stop-color="#00F2FE"/></linearGradient>
            <linearGradient id="slg2" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#FFE259"/><stop offset="100%" stop-color="#FFA751"/></linearGradient>
          </defs>
        </svg>
      </div>
      <h1 class="splash-title">WeatherSphere</h1>
      <p class="splash-tagline">Live Â· Accurate Â· Beautiful</p>
      <p class="splash-desc">Real-time weather, AI-powered climate insights,<br>and hyper-local forecasts â€” all in one place.</p>
      <div class="splash-features">
        <div class="splash-feat"><span>ğŸŒ</span><span>Global Coverage</span></div>
        <div class="splash-feat"><span>âš¡</span><span>Live Updates</span></div>
        <div class="splash-feat"><span>ğŸ—º</span><span>Interactive Map</span></div>
        <div class="splash-feat"><span>ğŸ“œ</span><span>AI Climate Data</span></div>
      </div>
      <div class="splash-scroll-hint">
        <div class="scroll-chevron"></div>
        <span>Scroll to explore</span>
      </div>
    </div>
  </div>

  <!-- DAY DETAIL MODAL -->
  <div id="dayModal" class="day-modal hidden" role="dialog">
    <div class="day-modal-backdrop" id="dayModalBackdrop"></div>
    <div class="day-modal-panel">
      <button class="day-modal-close" id="dayModalClose">âœ•</button>
      <div id="dayModalContent"></div>
    </div>
  </div>

  <!-- Background -->
  <div class="orb orb-1"></div><div class="orb orb-2"></div><div class="orb orb-3"></div>
  <canvas id="bgCanvas"></canvas>

  <!-- Toast -->
  <div id="errorToast" class="toast hidden">
    <span>âš </span><span id="errorMsg">Error</span>
    <button onclick="this.closest('.toast').classList.add('hidden')">âœ•</button>
  </div>

  <!-- Tracking banner -->
  <div id="trackBanner" class="track-banner hidden">
    <span class="live-dot"></span><span id="trackText">Live tracking</span>
    <button id="stopTrack">Stop</button>
  </div>

  <!-- HEADER -->
  <header class="header reveal-item" data-delay="0">
    <div class="header-brand">
      <div class="logo">
        <svg viewBox="0 0 32 32" fill="none">
          <circle cx="16" cy="16" r="14" fill="url(#lg1)"/>
          <path d="M10 18 Q9 14 12 12 Q12 7 17 7 Q21 4 25 8 Q28 8 28 12 Q30 12 30 15 Q30 18 27 18 Z" fill="white" opacity="0.9"/>
          <circle cx="16" cy="13" r="4" fill="url(#lg2)" opacity="0.8"/>
          <defs>
            <linearGradient id="lg1" x1="0" y1="0" x2="32" y2="32"><stop offset="0%" stop-color="#4FACFE"/><stop offset="100%" stop-color="#00F2FE"/></linearGradient>
            <linearGradient id="lg2" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#FFE259"/><stop offset="100%" stop-color="#FFA751"/></linearGradient>
          </defs>
        </svg>
      </div>
      <div>
        <div class="brand-name">WeatherSphere</div>
        <div class="brand-sub">Live Â· Accurate Â· Beautiful</div>
      </div>
    </div>
    <div class="header-search">
      <div class="search-box">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input type="text" id="searchInput" placeholder="Search cityâ€¦" autocomplete="off" spellcheck="false">
        <div id="suggestions" class="suggestions hidden"></div>
      </div>
      <button id="searchBtn" class="btn-search">Search</button>
    </div>
    <div class="header-controls">
      <div id="recentChips" class="chips-row"></div>
      <button id="unitToggle" class="ctrl-btn">Â°C</button>
      <button id="themeToggle" class="ctrl-btn">
        <svg id="themeIcon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
      <button id="trackBtn" class="ctrl-btn ctrl-track" title="Live tracking">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"/><circle cx="12" cy="10" r="3"/></svg>
      </button>
    </div>
  </header>

  <!-- MAIN -->
  <main class="main" id="appMain">
    <div class="col-left">
      <div id="favSection" class="fav-bar hidden reveal-item" data-delay="1">
        <span class="fav-label">â­ Saved</span>
        <div id="favChips" class="chips-row"></div>
      </div>
      <div class="card hero-card reveal-item" id="heroCard" data-delay="2">
        <div class="hero-bg-orb"></div>
        <div class="hero-top">
          <div><h1 id="locationName" class="hero-city">Loadingâ€¦</h1><div id="updatedAt" class="hero-updated">â€”</div></div>
          <button id="favBtn" class="fav-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
          </button>
        </div>
        <div class="hero-body">
          <div class="hero-icon-wrap"><img id="currentIcon" class="hero-icon" src="" alt=""><div id="iconGlow" class="hero-icon-glow"></div></div>
          <div class="hero-temp-block">
            <div id="currentTemp" class="hero-temp">--Â°</div>
            <div id="currentCondition" class="hero-cond">--</div>
            <div id="hiLo" class="hero-hilo">H: --Â° Â· L: --Â°</div>
          </div>
        </div>
        <div class="stats-row">
          <div class="stat"><div class="stat-icon">ğŸŒ¡ï¸</div><div class="stat-lbl">Feels like</div><div id="feelsLike" class="stat-val">--Â°</div></div>
          <div class="stat"><div class="stat-icon">ğŸ’§</div><div class="stat-lbl">Humidity</div><div id="humidity" class="stat-val">--%</div></div>
          <div class="stat"><div class="stat-icon">ğŸ’¨</div><div class="stat-lbl">Wind</div><div id="windSpeed" class="stat-val">--</div></div>
          <div class="stat"><div class="stat-icon">ğŸ§­</div><div class="stat-lbl">Direction</div><div id="windDir" class="stat-val">--</div></div>
          <div class="stat"><div class="stat-icon">ğŸ“Š</div><div class="stat-lbl">Pressure</div><div id="pressure" class="stat-val">--</div></div>
          <div class="stat"><div class="stat-icon">ğŸ‘</div><div class="stat-lbl">Visibility</div><div id="visibility" class="stat-val">--</div></div>
          <div class="stat"><div class="stat-icon">ğŸŒ…</div><div class="stat-lbl">Sunrise</div><div id="sunrise" class="stat-val">--</div></div>
          <div class="stat"><div class="stat-icon">ğŸŒ‡</div><div class="stat-lbl">Sunset</div><div id="sunset" class="stat-val">--</div></div>
        </div>
      </div>
      <div class="row-2col reveal-item" data-delay="3">
        <div class="card uv-card">
          <div class="card-tag">â˜€ï¸ UV INDEX</div>
          <div class="card-num-row"><div id="uvValue" class="card-num">--</div><div id="uvLabel" class="card-badge">--</div></div>
          <div class="uv-bar-wrap">
            <div class="uv-bar-track"><div id="uvFill" class="uv-bar-fill"></div><div id="uvDot" class="uv-bar-dot"></div></div>
            <div class="uv-scale"><span>Low</span><span>Mod</span><span>High</span><span>V.Hi</span><span>Ext</span></div>
          </div>
        </div>
        <div class="card aqi-card">
          <div class="card-tag">ğŸŒ¬ AIR QUALITY</div>
          <div class="card-num-row"><div id="aqiValue" class="card-num">--</div><div id="aqiLabel" class="card-badge">--</div></div>
          <div class="aqi-row">
            <div class="aqi-pill"><span class="aqi-pill-name">PM2.5</span><span id="pm25" class="aqi-pill-val">--</span></div>
            <div class="aqi-pill"><span class="aqi-pill-name">PM10</span><span id="pm10" class="aqi-pill-val">--</span></div>
          </div>
        </div>
      </div>
      <div class="card reveal-item" data-delay="4">
        <div class="card-hd">ğŸ• NEXT 24 HOURS</div>
        <div id="hourlyStrip" class="hourly-strip"></div>
      </div>
      <div class="card reveal-item" data-delay="5">
        <div class="card-hd-row">
          <span class="card-hd">ğŸ“… 7-DAY FORECAST</span>
          <span class="forecast-hint">Tap a day for details</span>
        </div>
        <div id="dailyList" class="daily-list"></div>
      </div>
      <div class="card climate-card reveal-item" data-delay="6">
        <div class="card-hd">ğŸ“œ HISTORICAL CLIMATE</div>
        <div id="climateLoading" class="skeletons">
          <div class="skel w60"></div><div class="skel w90"></div><div class="skel w70"></div>
          <div class="skel w60" style="margin-top:12px"></div><div class="skel w90"></div><div class="skel w50"></div>
        </div>
        <div id="climateStats" class="climate-stat-grid hidden"></div>
        <div id="climateSections" class="climate-sections hidden"></div>
        <div id="climateError" class="climate-err hidden">
          <div class="err-icon">âš ï¸</div>
          <p id="climateErrorMsg">Could not load climate data.</p>
          <button id="climateRetry" class="retry-btn">Retry</button>
        </div>
      </div>
    </div>

    <aside class="col-right">
      <div class="card map-card reveal-item" data-delay="2">
        <div class="map-header">
          <span class="card-hd">ğŸ—º LIVE MAP</span>
          <span class="map-hint">Click anywhere for weather</span>
        </div>
        <div class="map-border-wrap">
          <div id="map"></div>
        </div>
        <div id="mapLoader" class="map-loader hidden"><div class="map-spin"></div><span>Fetchingâ€¦</span></div>
      </div>
      <div class="card reveal-item" data-delay="3">
        <div class="card-hd">âš¡ INSIGHTS</div>
        <div id="insightsList" class="insights-list">
          <div class="skel-insight"></div><div class="skel-insight"></div><div class="skel-insight"></div>
        </div>
      </div>
      <div class="card reveal-item" data-delay="4">
        <div class="card-hd">ğŸŒ¡ WEEKLY RANGE</div>
        <div id="rangeList" class="range-list"></div>
      </div>
    </aside>
  </main>

  <!-- FOOTER â€” bold brand, highlighted name -->
  <footer class="footer reveal-item" data-delay="7">
    <div class="footer-left">
      <div class="footer-brand">
        <div class="footer-logo">
          <svg viewBox="0 0 32 32" fill="none">
            <circle cx="16" cy="16" r="14" fill="url(#flg)"/>
            <path d="M10 18 Q9 14 12 12 Q12 7 17 7 Q21 4 25 8 Q28 8 28 12 Q30 12 30 15 Q30 18 27 18 Z" fill="white" opacity="0.9"/>
            <defs><linearGradient id="flg" x1="0" y1="0" x2="32" y2="32"><stop offset="0%" stop-color="#4FACFE"/><stop offset="100%" stop-color="#00F2FE"/></linearGradient></defs>
          </svg>
        </div>
        <div>
          <div class="footer-name">WeatherSphere</div>
          <div class="footer-tagline">Live Â· Accurate Â· Beautiful</div>
        </div>
      </div>
    </div>
    <div class="footer-center">
      <span>Data: <a href="https://open-meteo.com" target="_blank">Open-Meteo</a></span>
      <span class="sep">Â·</span>
      <span>Geo: <a href="https://opencagedata.com" target="_blank">OpenCage</a></span>
      <span class="sep">Â·</span>
      <span>Map: <a href="https://leafletjs.com" target="_blank">Leaflet</a></span>
    </div>
    <div class="footer-right">
      <span id="clock" class="footer-clock"></span>
    </div>
  </footer>

  <div id="loading" class="loading-veil hidden">
    <div class="spinner"><div></div><div></div><div></div></div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/map.js"></script>
  <script src="js/weather.js"></script>
  <script src="js/climate.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>